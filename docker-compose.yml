version: '3.7'

services:
  mongo-bi-connector:
      image: mongo-bi-connector:latest
      build: .
      ports:
        - "3307:3307"
      environment:
        - MONGO_URI= #  Replace with your MongoDB URI
        - MONGO_USERNAME= # Replace with your MongoDB username
        - MONGO_PASSWORD= # Replace With your MongoDB password
        - MONGO_AUTH_SOURCE= #  Replace with your MongoDB authentication source

      volumes:
        - ssl_keys:/etc/ssl/mongokeyfile

      # If you are using it with a mongo instance generated by docker-compose you can use the following lines to ensure that the mongo instance is up before the connector
      #depends_on:
      # - mongo
      restart: always
      command: sh -c "/app/entrypoint.sh"
volumes:
  ssl_keys: